
{% extends 'layout_main.html.twig' %}
{% block title %}Nouvel Utilisateur
	{% endblock %}
{% block content %}
<section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Nouvel Utilisateur</h1>
			 {% if classe is defined %}
			<div class="{{classe}}">{{resultat}}</div>
		{% endif %}
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              {# <li class="breadcrumb-item"><a href="{{ path('app_home') }}">Accueil</a></li>
              <li class="breadcrumb-item active">Nouvel Utilisateur</li> #}
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>
	    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
     <div class="row">
          <div class="col-12">

            <div class="card">
              {# <div class="card-header">
                {% if action == 'create' %}
						<h2 class="card-title">Nouvel Utilisateur</h2>
					{% endif %}
					{% if action == 'edit' %}
						<h2 class="card-title">Modifier Utilisateur [{{ Utilisateur.username }}]</h2>
					{% endif %}
              </div> #}
   <div class="card-body">
  <div class="container" style="padding-top: 0;">

  
  <h3>Formulaire d'ajout </h3><br>
  <form action="{{ path('ajout_user') }}" method="post">
    {{ form_start(form) }}
    
    <div class="form-group ">
      {{ form_label(form.firstName, 'Prénom') }}
      {{ form_widget(form.firstName, {'attr': {'class': 'form-control',
      'placeholder':'Entrez votre prénom'
      }}) }}
    </div>
    <div class="form-group">
      {{ form_label(form.lastName, 'Nom') }}
      {{ form_widget(form.lastName, {'attr': {'class': 'form-control',
      'placeholder':'Entrez votre nom'
      }}) }}
    </div>
    <div class="form-group">
      {{ form_label(form.telephone, 'Téléphone') }}
      {{ form_widget(form.telephone, {'attr': {'class': 'form-control',
      'placeholder':'Entrez votre téléphone',
      'pattern':'^\\d{8}$',
      'title':'Le numéro de téléphone doit contenir exactement 8 caractéres.',
      'maxlength':'8',
      'minlength':'8',
      }}) }}
    </div>
    <div class="form-group">
      {{ form_label(form.email, 'Email') }}
      {{ form_widget(form.email, {'attr': {'class': 'form-control',
      'placeholder':'Entrez l\'email'
      }}) }}
    </div>
    <div class="form-group">
      {{ form_label(form.adresse, 'Adresse') }}
      {{ form_widget(form.adresse, {'attr': {'class': 'form-control',
      'placeholder':'Entrez votre adresse'
      }}) }}
    </div>
    
    <div class="form-group">
      {{ form_label(form.password.first, 'Mot de passe') }}
      {{ form_widget(form.password.first, {'attr': {'class': 'form-control',
      'placeholder':'Entrez votre mot de passe'}}) }}
    </div>
    
    <div class="form-group">
      {{ form_label(form.password.second, 'Confirmer le mot de passe') }}
      {{ form_widget(form.password.second, {'attr': {'class': 'form-control',
      'placeholder':'Ressaisissez le mot de passe'}}) }}
    </div>
    <div class="form-group">
       <button type="submit" class="btn btn-primary"style="margin-right:15px">Enregistrer</button>
       <i class ="fa fa-ban"><a href="{{ path('list_user')}}"> <strong>Annuler</strong></a></i>

    </div>
    {{ form_end(form) }}
  </form>
</div></div>
<aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->


{% endblock %}
{% block autresFichiersJs %}
<!-- jQuery -->
<script src="{{ asset('plugins/jquery/jquery.min.js') }}"></script>
<!-- Bootstrap 4 -->
<script src="{{ asset('plugins/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
<!-- AdminLTE App -->
<script src="{{ asset('dist/js/adminlte.min.js') }}"></script>
<!-- AdminLTE for demo purposes -->
<script src="{{ asset('dist/js/demo.js') }}"></script>
<!-- Summernote -->
<script src="{{ asset('plugins/summernote/summernote-bs4.min.js') }}"></script>
<script>
  $(function () {
    // Summernote
    $('.textarea').summernote()
  })
</script>

<script>
	$(document).ready(function() {
    $("#show_hide_password a").on('click', function(event) {
        event.preventDefault();
        if($('#show_hide_password input').attr("type") == "text"){
            $('#show_hide_password input').attr('type', 'password');
            $('#show_hide_password i').addClass( "fa-eye-slash" );
            $('#show_hide_password i').removeClass( "fa-eye" );
        }else if($('#show_hide_password input').attr("type") == "password"){
            $('#show_hide_password input').attr('type', 'text');
            $('#show_hide_password i').removeClass( "fa-eye-slash" );
            $('#show_hide_password i').addClass( "fa-eye" );
        }
    });
});
</script>


<script>
    document.querySelector("form").addEventListener("submit", function (e) {
        const emailField = document.getElementById("user_email");
        const passwordField = document.getElementById("user_password_first");
        const confirmPasswordField = document.getElementById("user_password_second");

        let errors = [];

        // Vérification de l'email
        if (!emailField.value.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) {
            errors.push("L'email est invalide.");
        }

        // Vérification du mot de passe
        if (passwordField.value.length < 6) {
            errors.push("Le mot de passe doit contenir au moins 6 caractères.");
        }
        if (passwordField.value !== confirmPasswordField.value) {
            errors.push("Les mots de passe ne correspondent pas.");
        }

        if (errors.length > 0) {
            e.preventDefault();
            alert(errors.join("\n"));
        }
    });
</script>

{% endblock %}
