{% extends 'layout_main.html.twig' %}
{% block title %}Nouvel messure
	{% endblock %}
{% block content %}
<section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Nouvelle messure</h1>
			 {% if classe is defined %}
			<div class="{{classe}}">{{resultat}}</div>
		{% endif %}
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              {# <li class="breadcrumb-item"><a href="{{ path('app_home') }}">Accueil</a></li> #}
              {# <li class="breadcrumb-item active"><a href="{{ path('ajout_client') }}">Nouvel client</a></li> #}
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>
	    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
     <div class="row">
          <div class="col-12">

            <div class="card">
              {# <div class="card-header">
                {% if action == 'create' %}
						<h2 class="card-title">Nouvel client</h2>
					{% endif %}
					{% if action == 'edit' %}
						<h2 class="card-title">Modifier client [{{ client.username }}]</h2>
					{% endif %}
              </div> #}
   <div class="card-body">
   {% for type, messages in app.session.flashBag.all %}
  {% for message in messages %}
    {% if type == 'error' %}{% set type = 'danger' %}{% endif %}
    {% if type == 'success' %}{% set type = 'success' %}{% endif %}
    <div class="alert alert-{{ type }} alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="close" data-dismiss="alert">
        <span>&times;</span>
      </button>
    </div>
  {% endfor %}
{% endfor %}

  <div class="container" style="padding-top: 0;">

 
   {{ form_start(form) }}

    <div class="row">
      <div class="col-md-6">
        <h5>Entrez les mesures du haut</h5>
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              {{ form_label(form.epaule, 'Epaule (cm)') }}
              {{ form_widget(form.epaule, {'attr': {'class': 'form-control'}}) }}
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              {{ form_label(form.poitrine, 'Poitrine (cm)') }}
              {{ form_widget(form.poitrine, {'attr': {'class': 'form-control'}}) }}
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              {{ form_label(form.manche, 'Manche (cm)') }}
              {{ form_widget(form.manche, {'attr': {'class': 'form-control'}}) }}
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              {{ form_label(form.encolure, 'Encolure (cm)') }}
              {{ form_widget(form.encolure, {'attr': {'class': 'form-control'}}) }}
            </div>
          </div>
        </div>
        <div class="row">
         <div class="col-md-6">
          <div class="form-group">
            {{ form_label(form.poignee, 'Poignée (cm)') }}
            {{ form_widget(form.poignee, {'attr': {'class': 'form-control'}}) }}
          </div>
         </div>
         <div class="col-md-6">
          <div class="form-group">
            {{ form_label(form.ecartDos, 'Écart Dos (cm)') }}
            {{ form_widget(form.ecartDos, {'attr': {'class': 'form-control'}}) }}
          </div>
         </div>
        </div>
        <div class="row">
         <div class="col-md-6">
          <div class="form-group">
          {{ form_label(form.tourVentrale, 'Tour ventrale (cm)') }}
          {{ form_widget(form.tourVentrale, {'attr': {'class': 'form-control'}}) }}
          </div>
         </div>
         <div class="col-md-6">
          <div class="form-group">
            {{ form_label(form.longueur, 'Longueur chemise (cm)') }}
            {{ form_widget(form.longueur, {'attr': {'class': 'form-control'}}) }}
          </div>
         </div>
        </div>
      </div>

      <div class="col-md-6">
        <h5>Entrez les mesures du bas</h5>
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              {{ form_label(form.ceinture, 'Ceinture (cm)') }}
              {{ form_widget(form.ceinture, {'attr': {'class': 'form-control'}}) }}
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              {{ form_label(form.taille, 'Taille (cm)') }}
              {{ form_widget(form.taille, {'attr': {'class': 'form-control'}}) }}
            </div>
          </div>
        </div>
      <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              {{ form_label(form.fermeture, 'Fermeture (cm)') }}
              {{ form_widget(form.fermeture, {'attr': {'class': 'form-control'}}) }}
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
                {{ form_label(form.cuisse, 'Cuisse (cm)') }}
                {{ form_widget(form.cuisse, {'attr': {'class': 'form-control'}}) }}
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              {{ form_label(form.longueurPantalon, 'Longueur Pantalon (cm)') }}
              {{ form_widget(form.longueurPantalon, {'attr': {'class': 'form-control'}}) }}
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              {{ form_label(form.basPantalon, 'Bas Pantalon (cm)') }}
              {{ form_widget(form.basPantalon, {'attr': {'class': 'form-control'}}) }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="form-group">
      <button type="submit" class="btn btn-primary" style="margin-right:15px">Enregistrer</button>
      {% if not is_granted('ROLE_TAILLEUR') %}
      <i class="fa fa-ban">
        <a href="{{ path('list_mesure') }}"><strong>Annuler</strong></a>
      </i>
      {% endif %}
    </div>

    {{ form_end(form) }}
  
</div>

{% endblock %}
{% block autresFichiersJs %}
<script>
document.addEventListener("DOMContentLoaded", function () {

    const inputs = document.querySelectorAll(
        'input[name*="epaule"], input[name*="poitrine"], input[name*="manche"], input[name*="encolure"], ' +
        'input[name*="poignee"], input[name*="ecartDos"], input[name*="tourVentrale"], input[name*="longueur"], ' +
        'input[name*="ceinture"], input[name*="taille"], input[name*="fermeture"], input[name*="cuisse"], ' +
        'input[name*="longueurPantalon"], input[name*="basPantalon"]'
    );

    inputs.forEach(function(input) {

        // Empêche les lettres
        input.addEventListener("input", function () {
            this.value = this.value.replace(/[^0-9.]/g, '');
        });

        // Clavier numérique sur téléphone
        input.setAttribute("inputmode", "decimal");
        input.setAttribute("pattern", "[0-9]+(\\.[0-9]{1,2})?");
        input.setAttribute("placeholder", "Ex: 2.5");

    });

});
</script>
{% endblock %}
