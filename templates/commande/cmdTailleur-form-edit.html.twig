<form method="post" action="{{ path('cmd_affectation', {id: commande.id}) }}" id="form-tailleur-{{ commande.id }}">
    {{ form_start(form) }}
    <div class="form-group">
        {{ form_label(form.usert, 'Tailleur') }}
        {{ form_widget(form.usert, {
            'attr': {
                'class': 'form-control',
                'required': 'required'
            }
        }) }}
        <small class="text-danger d-none" id="error-usert-{{ commande.id }}">Veuillez sélectionner un tailleur.</small>
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-primary">Valider</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
    </div>
    {{ form_end(form) }}
</form>

<script>
    // Validation côté client pour le tailleur
    document.getElementById('form-tailleur-{{ commande.id }}').addEventListener('submit', function(e) {
        let select = this.querySelector('select');
        let errorMsg = document.getElementById('error-usert-{{ commande.id }}');
        if (!select.value) {
            e.preventDefault();
            errorMsg.classList.remove('d-none');
        } else {
            errorMsg.classList.add('d-none');
        }
    });
</script>
